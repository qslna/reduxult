"use strict";exports.id=285,exports.ids=[285],exports.modules={84653:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(41680).A)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},86235:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(41680).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},81259:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(41680).A)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]])},4339:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(41680).A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},18741:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(41680).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},72744:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(41680).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},69098:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(41680).A)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},73388:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(41680).A)("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]])},14922:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(41680).A)("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]])},22737:(e,t,a)=>{a.d(t,{A:()=>w});var s=a(45512),l=a(58009),i=a(6648),r=a(55786),n=a(74415),c=a(86235),o=a(18741),d=a(72744),h=a(4339),m=a(44269),p=a(81259),u=a(14922),x=a(73388),g=a(69098),f=a(45103),y=a(11891);function w({folder:e,layout:t="grid",maxItems:a,title:w,className:j="",acceptedTypes:b="all",columns:v=3,stackStyle:N="default",href:k}){let[A,I]=(0,l.useState)([]),[P,$]=(0,l.useState)(!0),[z,C]=(0,l.useState)(!1),[S,M]=(0,l.useState)(null),[E,q]=(0,l.useState)(null),[L,F]=(0,l.useState)(new Set),[K,T]=(0,l.useState)(new Set),[V,D]=(0,l.useState)(0),H=(0,l.useRef)(null),{isAdmin:W}=(0,n.z)(),_=async()=>{try{$(!0),M(null);let t=await fetch(`/api/imagekit/list?folder=${e}&limit=50`);if(!t.ok)throw Error("미디어를 불러올 수 없습니다");let s=(await t.json()).filter(e=>{let t=/\.(jpg|jpeg|png|gif|webp|avif)$/i.test(e.name),a=/\.(mp4|webm|ogg|mov|avi)$/i.test(e.name);return"images"===b?t:"videos"===b?a:t||a}).map(e=>{let t=/\.(mp4|webm|ogg|mov|avi)$/i.test(e.name);return{url:e.url,fileId:e.fileId,name:e.name,path:e.filePath,type:t?"video":"image",thumbnail:t?`${e.url}?tr=f-jpg,q-80`:e.url}}),l=a?s.slice(0,a):s;I(l)}catch(e){M(e instanceof Error?e.message:"미디어 로드 실패")}finally{$(!1)}},G=async t=>{if(t&&0!==t.length&&W)try{C(!0),D(0);for(let a=0;a<t.length;a++){let s=t[a],l=new FormData;if(l.append("file",s),l.append("folder",e),!(await fetch("/api/imagekit/upload",{method:"POST",body:l})).ok)throw Error(`${s.name} 업로드 실패`);D((a+1)/t.length*100)}await _()}catch(e){M(e instanceof Error?e.message:"업로드에 실패했습니다")}finally{C(!1),D(0)}},R=async(e,t)=>{if(W&&confirm(`'${t}'을(를) 삭제하시겠습니까?`))try{if(!(await fetch("/api/imagekit/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileId:e})})).ok)throw Error("삭제 실패");await _()}catch(e){M("삭제에 실패했습니다")}},O=e=>{F(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})},U=e=>{T(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})},X=()=>{switch(b){case"images":return"image/*";case"videos":return"video/*";default:return"image/*,video/*"}};if(P)return(0,s.jsxs)("div",{className:`flex items-center justify-center p-8 ${j}`,children:[(0,s.jsx)(c.A,{className:"w-8 h-8 animate-spin text-white/60"}),(0,s.jsx)("span",{className:"ml-2 text-white/60",children:"로딩 중..."})]});if(S)return(0,s.jsxs)("div",{className:`text-center p-8 ${j}`,children:[(0,s.jsx)("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-4 mb-4",children:(0,s.jsx)("p",{className:"text-red-300",children:S})}),(0,s.jsx)("button",{onClick:_,className:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:"다시 시도"})]});if("stack"===t){let e={default:{spread:15,rotation:8,scale:.95},spread:{spread:25,rotation:12,scale:.9},minimal:{spread:8,rotation:4,scale:.98}}[N];return(0,s.jsxs)("div",{className:j,children:[w&&(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-center text-white",children:w}),W&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("input",{ref:H,type:"file",accept:X(),multiple:!0,onChange:e=>{e.target.files&&G(e.target.files)},className:"hidden",disabled:z}),(0,s.jsx)("button",{onClick:()=>H.current?.click(),disabled:z,className:"w-full flex items-center justify-center gap-2 p-3 bg-white/10 hover:bg-white/20 rounded-lg cursor-pointer transition-colors disabled:opacity-50",children:z?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.A,{className:"w-4 h-4 animate-spin"}),(0,s.jsxs)("span",{className:"text-sm",children:[Math.round(V),"%"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm",children:"미디어 추가"})]})})]}),(0,s.jsxs)("div",{className:"relative w-full aspect-square group cursor-pointer",onClick:()=>{k&&window.open(k,"_blank")},style:{height:"400px"},children:[(0,s.jsx)(i.N,{children:0===A.length?(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full h-full border-2 border-dashed border-white/30 rounded-lg flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center text-white/50",children:[(0,s.jsx)(d.A,{className:"w-8 h-8 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-sm",children:"미디어가 없습니다"}),W&&(0,s.jsx)("p",{className:"text-xs mt-1",children:"위의 버튼을 클릭하여 추가하세요"})]})}):A.map((t,a)=>(0,s.jsxs)(r.P.div,{className:"absolute inset-0 rounded-lg overflow-hidden shadow-xl cursor-pointer",initial:{opacity:0,scale:.8,rotate:0,x:0,y:0},animate:{opacity:1-.1*a,scale:e.scale-.02*a,rotate:(a-Math.floor(A.length/2))*e.rotation,x:(a-Math.floor(A.length/2))*e.spread,y:3*a,zIndex:A.length-a},whileHover:{scale:(e.scale-.02*a)*1.02,transition:{duration:.2}},onClick:e=>{k||(e.stopPropagation(),q(t))},style:{zIndex:A.length-a},children:["video"===t.type?(0,s.jsxs)("div",{className:"relative w-full h-full bg-black",children:[(0,s.jsx)("video",{src:t.url,className:"w-full h-full object-cover",muted:!0,loop:!0,playsInline:!0}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center",children:(0,s.jsx)(h.A,{className:"w-12 h-12 text-white opacity-80"})})]}):(0,s.jsx)(f.default,{src:(0,y.Nu)(t.url,{width:400,height:500,quality:85,format:"webp"}),alt:t.name,fill:!0,className:"object-cover",sizes:"400px",unoptimized:!0}),W&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),R(t.fileId,t.name)},className:"absolute top-2 right-2 p-1 bg-red-500 hover:bg-red-600 rounded-full opacity-0 group-hover:opacity-100 transition-opacity z-10",children:(0,s.jsx)(m.A,{className:"w-3 h-3 text-white"})})]},t.fileId))}),k&&A.length>0&&(0,s.jsx)(r.P.div,{className:"absolute inset-0 bg-black/20 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center pointer-events-none",style:{zIndex:1e3},children:(0,s.jsx)("span",{className:"text-white font-medium",children:"클릭하여 보기"})})]}),(0,s.jsx)("div",{className:"text-center mt-4",children:(0,s.jsxs)("span",{className:"text-xs text-white/60",children:[A.length,"개 미디어"]})})]})}return(0,s.jsxs)("div",{className:j,children:[w&&(0,s.jsx)("h3",{className:"text-2xl font-bold mb-6 text-center text-white",children:w}),W&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("input",{ref:H,type:"file",accept:X(),multiple:!0,onChange:e=>{e.target.files&&G(e.target.files)},className:"hidden",disabled:z}),(0,s.jsx)("button",{onClick:()=>H.current?.click(),disabled:z,className:"flex items-center gap-2 px-4 py-2 bg-white text-black font-medium rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:z?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.A,{className:"w-4 h-4 animate-spin"}),"업로드 중... ",Math.round(V),"%"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{className:"w-4 h-4"}),"미디어 추가"]})})]}),(0,s.jsx)("div",{className:(()=>{switch(t){case"grid":return`grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-${v}`;case"masonry":return"columns-1 sm:columns-2 lg:columns-3 gap-4 space-y-4";case"carousel":return"flex gap-4 overflow-x-auto pb-4";case"stack":return"relative w-full max-w-sm mx-auto";default:return"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3"}})(),children:(0,s.jsx)(i.N,{children:0===A.length?(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},className:"col-span-full flex items-center justify-center p-12 border-2 border-dashed border-white/30 rounded-lg",children:(0,s.jsxs)("div",{className:"text-center text-white/50",children:[(0,s.jsx)(d.A,{className:"w-12 h-12 mx-auto mb-4"}),(0,s.jsx)("p",{children:"미디어가 없습니다"}),W&&(0,s.jsx)("p",{className:"text-sm mt-2",children:"위의 버튼을 클릭하여 추가하세요"})]})}):A.map((e,a)=>(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.8},transition:{delay:.1*a},className:`relative group cursor-pointer ${"carousel"===t?"flex-shrink-0 w-64":""}`,onClick:()=>q(e),children:[(0,s.jsxs)("div",{className:"relative aspect-square rounded-lg overflow-hidden bg-gray-900",children:["video"===e.type?(0,s.jsxs)("div",{className:"relative w-full h-full",children:[(0,s.jsx)("video",{src:e.url,className:"w-full h-full object-cover",muted:K.has(e.fileId),autoPlay:L.has(e.fileId),loop:!0,playsInline:!0}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-colors flex items-center justify-center",children:(0,s.jsxs)("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),O(e.fileId)},className:"p-2 bg-white/20 hover:bg-white/30 rounded-full",children:L.has(e.fileId)?(0,s.jsx)(p.A,{className:"w-4 h-4 text-white"}):(0,s.jsx)(h.A,{className:"w-4 h-4 text-white"})}),(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),U(e.fileId)},className:"p-2 bg-white/20 hover:bg-white/30 rounded-full",children:K.has(e.fileId)?(0,s.jsx)(u.A,{className:"w-4 h-4 text-white"}):(0,s.jsx)(x.A,{className:"w-4 h-4 text-white"})})]})}),(0,s.jsx)("div",{className:"absolute top-2 left-2",children:(0,s.jsx)(g.A,{className:"w-4 h-4 text-white"})})]}):(0,s.jsx)(f.default,{src:(0,y.Nu)(e.url,{width:300,height:300,quality:85,format:"webp"}),alt:e.name,fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-300",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",unoptimized:!0}),W&&(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),R(e.fileId,e.name)},className:"absolute top-2 right-2 p-1 bg-red-500 hover:bg-red-600 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)(m.A,{className:"w-3 h-3 text-white"})})]}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("p",{className:"text-sm text-white/80 truncate",children:e.name})})]},e.fileId))})}),(0,s.jsx)(i.N,{children:E&&(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",onClick:()=>q(null),children:(0,s.jsxs)(r.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"relative max-w-4xl max-h-full",onClick:e=>e.stopPropagation(),children:["video"===E.type?(0,s.jsx)("video",{src:E.url,controls:!0,autoPlay:!0,className:"max-w-full max-h-full rounded-lg"}):(0,s.jsx)(f.default,{src:E.url,alt:E.name,width:1200,height:800,className:"max-w-full max-h-full object-contain rounded-lg",unoptimized:!0}),(0,s.jsx)("button",{onClick:()=>q(null),className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-black/70 rounded-full",children:(0,s.jsx)(m.A,{className:"w-6 h-6 text-white"})})]})})}),z&&(0,s.jsx)("div",{className:"fixed bottom-4 right-4 bg-black/70 backdrop-blur-sm rounded-lg p-4 text-white",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(d.A,{size:16}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"text-sm mb-1",children:["업로드 중... ",Math.round(V),"%"]}),(0,s.jsx)("div",{className:"w-48 bg-gray-600 rounded-full h-1",children:(0,s.jsx)("div",{className:"bg-green-500 h-1 rounded-full transition-all duration-300",style:{width:`${V}%`}})})]})]})})]})}},11891:(e,t,a)=>{a.d(t,{Nu:()=>r});var s=a(2783),l=a.n(s);let i={publicKey:"public_2BXoL4/MDWL0GjI21rq6iIG1TF8=",urlEndpoint:"https://ik.imagekit.io/t914"};function r(e,t){if(e.startsWith("http")||e.startsWith("data:"))return e;let a=`${i.urlEndpoint}${e.startsWith("/")?e:`/${e}`}`;if(t){let e=new URLSearchParams;t.width&&e.append("tr",`w-${t.width}`),t.height&&e.append("tr",`h-${t.height}`),t.quality&&e.append("tr",`q-${t.quality}`),t.format&&e.append("tr",`f-${t.format}`),t.crop&&e.append("tr",`c-${t.crop}`),t.focus&&e.append("tr",`fo-${t.focus}`),e.toString()&&(a+=`?${e.toString()}`)}return a}new(l())({publicKey:i.publicKey,privateKey:process.env.IMAGEKIT_PRIVATE_KEY,urlEndpoint:i.urlEndpoint})}};