"use strict";exports.id=313,exports.ids=[313],exports.modules={45723:(e,t,s)=>{s.d(t,{A:()=>i});let i=(0,s(41680).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},4339:(e,t,s)=>{s.d(t,{A:()=>i});let i=(0,s(41680).A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},20687:(e,t,s)=>{s.d(t,{A:()=>w});var i=s(45512),a=s(58009),l=s(72744),r=s(67418),n=s(41680);let o=(0,n.A)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);var c=s(4339);let d=(0,n.A)("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),x=(0,n.A)("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);var u=s(43286),m=s(21956),h=s(49656),p=s(44269),y=s(12592),b=s(24849),j=s(6648),g=s(31700),v=s(40953),N=s(85457);function w({src:e,className:t="",onUpdate:s,onDelete:n,category:w="videos",poster:f,controls:k=!0,autoPlay:z=!1,muted:A=!0,loop:P=!1,enableCMS:M=!0,mediaId:C}){let{isAdmin:S}=(0,v.A)(),{addMedia:$,deleteMedia:I,addActivity:U,addError:V}=(0,N.A)(),[D,T]=(0,a.useState)(!1),[L,R]=(0,a.useState)(!1),[O,E]=(0,a.useState)(0),[W,q]=(0,a.useState)(null),[F,_]=(0,a.useState)(!1),[H,B]=(0,a.useState)(e),[X,G]=(0,a.useState)(!1),[J,K]=(0,a.useState)(A),Q=(0,a.useRef)(null),Y=(0,a.useRef)(null),Z=(0,a.useCallback)(e=>{let t=e.target.files?.[0];if(t){if(!["video/mp4","video/webm","video/mov","video/avi"].includes(t.type)){q("Invalid file type. Please select an MP4, WebM, MOV, or AVI video.");return}if(t.size>0x3200000){q("File size too large. Please select a video under 50MB.");return}ee(t)}},[]),ee=async e=>{R(!0),E(0),q(null);try{let t=setInterval(()=>{E(e=>e>=90?(clearInterval(t),e):e+10)},200),i=URL.createObjectURL(e);B(i),setTimeout(()=>{clearInterval(t),E(100),s&&s(i);let a=`vid_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;if(M){let t={id:a,url:i,type:"video",title:e.name,category:w,folder:w,width:0,height:0,duration:0,size:e.size,uploadedAt:new Date().toISOString(),updatedAt:new Date().toISOString(),tags:[],metadata:{originalName:e.name,fileType:e.type}};$(t),U({userId:"admin",action:"upload",entityType:"media",entityId:t.id,details:`Uploaded video: ${e.name} to ${w}`})}setTimeout(()=>{R(!1),E(0)},1e3)},2e3)}catch(t){q(t instanceof Error?t.message:"Upload failed"),V(`Failed to upload ${e.name}: ${t instanceof Error?t.message:"Unknown error"}`),R(!1),E(0)}},et=e=>{if(!e)return"";if(e.startsWith("http")||e.startsWith("blob:"))return e;let t="https://ik.imagekit.io/t914/";return t?`${t}${e.startsWith("/")?e:`/${e}`}`:e};return H||S?S?(0,i.jsxs)("div",{className:`relative group ${t}`,onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),children:[(0,i.jsx)("input",{ref:Q,type:"file",accept:"video/*",onChange:Z,className:"hidden"}),H?(0,i.jsx)("video",{ref:Y,src:et(H),poster:f,controls:k&&!D,autoPlay:z,muted:J,loop:P,className:"w-full h-full object-cover transition-all duration-300 group-hover:brightness-75",onPlay:()=>G(!0),onPause:()=>G(!1)}):(0,i.jsx)("div",{className:"w-full h-full bg-zinc-900 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center text-gray-400",children:[(0,i.jsx)(l.A,{size:48,className:"mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-lg font-medium mb-2",children:"No Video"}),(0,i.jsx)("p",{className:"text-sm",children:"Click edit to upload a video"})]})}),(0,i.jsx)(j.N,{children:L&&(0,i.jsx)(g.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-20",children:(0,i.jsxs)("div",{className:"text-center text-white",children:[(0,i.jsx)("div",{className:"w-16 h-16 border-4 border-white/30 border-t-white rounded-full animate-spin mb-4 mx-auto"}),(0,i.jsx)("p",{className:"text-sm font-medium",children:"Uploading Video..."}),(0,i.jsxs)("p",{className:"text-xs text-gray-300 mt-1",children:[O,"%"]}),(0,i.jsx)("div",{className:"w-32 h-1 bg-white/30 rounded-full mt-2 overflow-hidden",children:(0,i.jsx)(g.P.div,{className:"h-full bg-white rounded-full",initial:{width:"0%"},animate:{width:`${O}%`},transition:{duration:.3}})})]})})}),(0,i.jsx)(j.N,{children:W&&(0,i.jsx)(g.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute inset-0 bg-red-500/90 backdrop-blur-sm flex items-center justify-center z-20",children:(0,i.jsxs)("div",{className:"text-center text-white p-4",children:[(0,i.jsx)(r.A,{size:24,className:"mx-auto mb-2"}),(0,i.jsx)("p",{className:"text-sm font-medium mb-2",children:"Upload Error"}),(0,i.jsx)("p",{className:"text-xs",children:W}),(0,i.jsx)("button",{onClick:()=>q(null),className:"mt-2 px-3 py-1 bg-white/20 rounded-lg text-xs hover:bg-white/30 transition-colors",children:"Dismiss"})]})})}),(0,i.jsx)(j.N,{children:D&&!L&&(0,i.jsx)(g.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-10",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[H&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>{Y.current&&(X?Y.current.pause():Y.current.play(),G(!X))},className:"p-2 bg-blue-500 hover:bg-blue-600 rounded-lg transition-colors",title:X?"Pause":"Play",children:X?(0,i.jsx)(o,{size:16,className:"text-white"}):(0,i.jsx)(c.A,{size:16,className:"text-white"})}),(0,i.jsx)("button",{onClick:()=>{Y.current&&(Y.current.muted=!J,K(!J))},className:"p-2 bg-yellow-500 hover:bg-yellow-600 rounded-lg transition-colors",title:J?"Unmute":"Mute",children:J?(0,i.jsx)(d,{size:16,className:"text-white"}):(0,i.jsx)(x,{size:16,className:"text-white"})})]}),(0,i.jsx)("button",{onClick:()=>{Q.current?.click()},className:"p-2 bg-green-500 hover:bg-green-600 rounded-lg transition-colors",title:"Replace Video",children:(0,i.jsx)(u.A,{size:16,className:"text-white"})}),M&&C&&(0,i.jsx)("button",{onClick:()=>_(!F),className:"p-2 bg-purple-500 hover:bg-purple-600 rounded-lg transition-colors",title:"More Actions",children:(0,i.jsx)(m.A,{size:16,className:"text-white"})}),n&&H&&(0,i.jsx)("button",{onClick:()=>{n&&n(),M&&C&&(I(C),U({userId:"admin",action:"delete",entityType:"media",entityId:C,details:`Deleted video: ${H}`}))},className:"p-2 bg-red-500 hover:bg-red-600 rounded-lg transition-colors",title:"Delete Video",children:(0,i.jsx)(h.A,{size:16,className:"text-white"})})]})})}),(0,i.jsx)(j.N,{children:F&&M&&(0,i.jsxs)(g.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"absolute top-4 right-4 bg-black/90 backdrop-blur-sm rounded-lg p-3 z-30 min-w-48",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsx)("h4",{className:"text-white text-sm font-medium",children:"Video Actions"}),(0,i.jsx)("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-white",children:(0,i.jsx)(p.A,{size:14})})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("button",{onClick:()=>navigator.clipboard.writeText(H),className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-white hover:bg-white/10 rounded transition-colors",children:[(0,i.jsx)(y.A,{size:12}),"Copy URL"]}),(0,i.jsxs)("button",{onClick:()=>window.open(H,"_blank"),className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-white hover:bg-white/10 rounded transition-colors",children:[(0,i.jsx)(m.A,{size:12}),"Open in New Tab"]}),(0,i.jsxs)("div",{className:"border-t border-gray-600 pt-2",children:[(0,i.jsxs)("p",{className:"text-xs text-gray-400 mb-1",children:["Category: ",w]}),C&&(0,i.jsxs)("p",{className:"text-xs text-gray-400",children:["ID: ",C]})]})]})]})}),L&&(0,i.jsx)("div",{className:"absolute top-2 right-2 z-30",children:(0,i.jsx)("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:(0,i.jsx)(l.A,{size:12,className:"text-white"})})}),100===O&&(0,i.jsx)(g.P.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"absolute top-2 right-2 z-30",children:(0,i.jsx)("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:(0,i.jsx)(b.A,{size:12,className:"text-white"})})})]}):(0,i.jsx)("div",{className:`relative ${t}`,children:(0,i.jsx)("video",{src:et(H),poster:f,controls:k,autoPlay:z,muted:A,loop:P,className:"w-full h-full object-cover"})}):null}}};