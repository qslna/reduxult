"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[328],{2725:(e,t,s)=>{s.d(t,{A:()=>i});let i=(0,s(7401).A)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]])},9191:(e,t,s)=>{s.d(t,{A:()=>i});let i=(0,s(7401).A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},5220:(e,t,s)=>{s.d(t,{A:()=>i});let i=(0,s(7401).A)("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]])},650:(e,t,s)=>{s.d(t,{A:()=>i});let i=(0,s(7401).A)("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]])},9947:(e,t,s)=>{s.d(t,{A:()=>N});var i=s(5155),a=s(2115),l=s(8684),n=s(1594),r=s(2725),c=s(9191),o=s(650),d=s(5220),u=s(3580),x=s(2598),m=s(5686),h=s(767),p=s(3920),b=s(8867),y=s(5683),j=s(9219),g=s(5953),v=s(6009);function N(e){let{src:t,className:s="",onUpdate:N,onDelete:w,category:f="videos",poster:k,controls:A=!0,autoPlay:z=!1,muted:P=!0,loop:C=!1,enableCMS:M=!0,mediaId:S}=e,{isAdmin:I}=(0,g.A)(),{addMedia:U,deleteMedia:V,addActivity:D,addError:T}=(0,v.A)(),[_,E]=(0,a.useState)(!1),[L,R]=(0,a.useState)(!1),[O,W]=(0,a.useState)(0),[q,F]=(0,a.useState)(null),[H,B]=(0,a.useState)(!1),[X,G]=(0,a.useState)(t),[J,K]=(0,a.useState)(!1),[Q,Y]=(0,a.useState)(P),Z=(0,a.useRef)(null),$=(0,a.useRef)(null),ee=(0,a.useCallback)(e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){if(!["video/mp4","video/webm","video/mov","video/avi"].includes(s.type)){F("Invalid file type. Please select an MP4, WebM, MOV, or AVI video.");return}if(s.size>0x3200000){F("File size too large. Please select a video under 50MB.");return}et(s)}},[]),et=async e=>{R(!0),W(0),F(null);try{let t=setInterval(()=>{W(e=>e>=90?(clearInterval(t),e):e+10)},200),s=URL.createObjectURL(e);G(s),setTimeout(()=>{clearInterval(t),W(100),N&&N(s);let i="vid_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9));if(M){let t={id:i,url:s,type:"video",title:e.name,category:f,folder:f,width:0,height:0,duration:0,size:e.size,uploadedAt:new Date().toISOString(),updatedAt:new Date().toISOString(),tags:[],metadata:{originalName:e.name,fileType:e.type}};U(t),D({userId:"admin",action:"upload",entityType:"media",entityId:t.id,details:"Uploaded video: ".concat(e.name," to ").concat(f)})}setTimeout(()=>{R(!1),W(0)},1e3)},2e3)}catch(t){F(t instanceof Error?t.message:"Upload failed"),T("Failed to upload ".concat(e.name,": ").concat(t instanceof Error?t.message:"Unknown error")),R(!1),W(0)}},es=e=>{if(!e)return"";if(e.startsWith("http")||e.startsWith("blob:"))return e;let t="https://ik.imagekit.io/t914/";return t?"".concat(t).concat(e.startsWith("/")?e:"/".concat(e)):e};return X||I?I?(0,i.jsxs)("div",{className:"relative group ".concat(s),onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),children:[(0,i.jsx)("input",{ref:Z,type:"file",accept:"video/*",onChange:ee,className:"hidden"}),X?(0,i.jsx)("video",{ref:$,src:es(X),poster:k,controls:A&&!_,autoPlay:z,muted:Q,loop:C,className:"w-full h-full object-cover transition-all duration-300 group-hover:brightness-75",onPlay:()=>K(!0),onPause:()=>K(!1)}):(0,i.jsx)("div",{className:"w-full h-full bg-zinc-900 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center text-gray-400",children:[(0,i.jsx)(l.A,{size:48,className:"mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-lg font-medium mb-2",children:"No Video"}),(0,i.jsx)("p",{className:"text-sm",children:"Click edit to upload a video"})]})}),(0,i.jsx)(y.N,{children:L&&(0,i.jsx)(j.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-20",children:(0,i.jsxs)("div",{className:"text-center text-white",children:[(0,i.jsx)("div",{className:"w-16 h-16 border-4 border-white/30 border-t-white rounded-full animate-spin mb-4 mx-auto"}),(0,i.jsx)("p",{className:"text-sm font-medium",children:"Uploading Video..."}),(0,i.jsxs)("p",{className:"text-xs text-gray-300 mt-1",children:[O,"%"]}),(0,i.jsx)("div",{className:"w-32 h-1 bg-white/30 rounded-full mt-2 overflow-hidden",children:(0,i.jsx)(j.P.div,{className:"h-full bg-white rounded-full",initial:{width:"0%"},animate:{width:"".concat(O,"%")},transition:{duration:.3}})})]})})}),(0,i.jsx)(y.N,{children:q&&(0,i.jsx)(j.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute inset-0 bg-red-500/90 backdrop-blur-sm flex items-center justify-center z-20",children:(0,i.jsxs)("div",{className:"text-center text-white p-4",children:[(0,i.jsx)(n.A,{size:24,className:"mx-auto mb-2"}),(0,i.jsx)("p",{className:"text-sm font-medium mb-2",children:"Upload Error"}),(0,i.jsx)("p",{className:"text-xs",children:q}),(0,i.jsx)("button",{onClick:()=>F(null),className:"mt-2 px-3 py-1 bg-white/20 rounded-lg text-xs hover:bg-white/30 transition-colors",children:"Dismiss"})]})})}),(0,i.jsx)(y.N,{children:_&&!L&&(0,i.jsx)(j.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-10",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[X&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>{$.current&&(J?$.current.pause():$.current.play(),K(!J))},className:"p-2 bg-blue-500 hover:bg-blue-600 rounded-lg transition-colors",title:J?"Pause":"Play",children:J?(0,i.jsx)(r.A,{size:16,className:"text-white"}):(0,i.jsx)(c.A,{size:16,className:"text-white"})}),(0,i.jsx)("button",{onClick:()=>{$.current&&($.current.muted=!Q,Y(!Q))},className:"p-2 bg-yellow-500 hover:bg-yellow-600 rounded-lg transition-colors",title:Q?"Unmute":"Mute",children:Q?(0,i.jsx)(o.A,{size:16,className:"text-white"}):(0,i.jsx)(d.A,{size:16,className:"text-white"})})]}),(0,i.jsx)("button",{onClick:()=>{var e;null===(e=Z.current)||void 0===e||e.click()},className:"p-2 bg-green-500 hover:bg-green-600 rounded-lg transition-colors",title:"Replace Video",children:(0,i.jsx)(u.A,{size:16,className:"text-white"})}),M&&S&&(0,i.jsx)("button",{onClick:()=>B(!H),className:"p-2 bg-purple-500 hover:bg-purple-600 rounded-lg transition-colors",title:"More Actions",children:(0,i.jsx)(x.A,{size:16,className:"text-white"})}),w&&X&&(0,i.jsx)("button",{onClick:()=>{w&&w(),M&&S&&(V(S),D({userId:"admin",action:"delete",entityType:"media",entityId:S,details:"Deleted video: ".concat(X)}))},className:"p-2 bg-red-500 hover:bg-red-600 rounded-lg transition-colors",title:"Delete Video",children:(0,i.jsx)(m.A,{size:16,className:"text-white"})})]})})}),(0,i.jsx)(y.N,{children:H&&M&&(0,i.jsxs)(j.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"absolute top-4 right-4 bg-black/90 backdrop-blur-sm rounded-lg p-3 z-30 min-w-48",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsx)("h4",{className:"text-white text-sm font-medium",children:"Video Actions"}),(0,i.jsx)("button",{onClick:()=>B(!1),className:"text-gray-400 hover:text-white",children:(0,i.jsx)(h.A,{size:14})})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("button",{onClick:()=>navigator.clipboard.writeText(X),className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-white hover:bg-white/10 rounded transition-colors",children:[(0,i.jsx)(p.A,{size:12}),"Copy URL"]}),(0,i.jsxs)("button",{onClick:()=>window.open(X,"_blank"),className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-white hover:bg-white/10 rounded transition-colors",children:[(0,i.jsx)(x.A,{size:12}),"Open in New Tab"]}),(0,i.jsxs)("div",{className:"border-t border-gray-600 pt-2",children:[(0,i.jsxs)("p",{className:"text-xs text-gray-400 mb-1",children:["Category: ",f]}),S&&(0,i.jsxs)("p",{className:"text-xs text-gray-400",children:["ID: ",S]})]})]})]})}),L&&(0,i.jsx)("div",{className:"absolute top-2 right-2 z-30",children:(0,i.jsx)("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:(0,i.jsx)(l.A,{size:12,className:"text-white"})})}),100===O&&(0,i.jsx)(j.P.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"absolute top-2 right-2 z-30",children:(0,i.jsx)("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:(0,i.jsx)(b.A,{size:12,className:"text-white"})})})]}):(0,i.jsx)("div",{className:"relative ".concat(s),children:(0,i.jsx)("video",{src:es(X),poster:k,controls:A,autoPlay:z,muted:P,loop:C,className:"w-full h-full object-cover"})}):null}}}]);