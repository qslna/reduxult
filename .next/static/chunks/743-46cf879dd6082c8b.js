"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[743],{7358:(e,t,a)=>{a.d(t,{A:()=>d});var s=a(5155),i=a(2115),n=a(5565),r=a(3580),o=a(5686),l=a(5683),c=a(9124);function d(e){let{src:t,alt:a,className:d="",objectFit:u="cover",sizes:p,onUpdate:m,onDelete:h,category:g="general"}=e,[x,f]=(0,i.useState)(!1),[b,v]=(0,i.useState)(!1),[j,w]=(0,i.useState)(!1),y=(0,i.useRef)(null);(0,i.useEffect)(()=>{let e=()=>{f("true"===localStorage.getItem("adminAuth"))};return e(),window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]);let N=async e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){if(a.size>0xa00000){alert("파일 크기는 10MB 이하여야 합니다.");return}if(!["image/jpeg","image/png","image/webp"].includes(a.type)){alert("JPG, PNG, WebP 형식만 지원됩니다.");return}w(!0);try{let e=new FormData;e.append("file",a),e.append("fileName",a.name),e.append("folder","/redux/".concat(g));let t=new FileReader;t.onloadend=async()=>{try{let e=t.result,s=await fetch("/api/imagekit/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:e,fileName:a.name,folder:"/redux/".concat(g)})});if(!s.ok)throw Error("업로드 실패");let i=await s.json();m&&m(i.url),alert("이미지가 성공적으로 업로드되었습니다.")}catch(e){alert("이미지 업로드에 실패했습니다.")}finally{w(!1)}},t.readAsDataURL(a)}catch(e){alert("파일 처리 중 오류가 발생했습니다."),w(!1)}y.current&&(y.current.value="")}};return(0,s.jsxs)("div",{className:"relative h-full w-full group",onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),children:[(0,s.jsx)(n.default,{src:t,alt:a,fill:!0,className:"".concat(d," ").concat("cover"===u?"object-cover":"object-".concat(u)),sizes:p}),(0,s.jsx)(l.N,{children:x&&b&&!j&&(0,s.jsxs)(c.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/70 flex items-center justify-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.click()},className:"p-3 bg-white/10 hover:bg-white/20 rounded-full backdrop-blur-sm transition-colors",title:"이미지 변경",children:(0,s.jsx)(r.A,{size:20})}),h&&(0,s.jsx)("button",{onClick:()=>{window.confirm("이 이미지를 삭제하시겠습니까?")&&h&&h()},className:"p-3 bg-red-600/20 hover:bg-red-600/30 rounded-full backdrop-blur-sm transition-colors",title:"이미지 삭제",children:(0,s.jsx)(o.A,{size:20})})]})}),j&&(0,s.jsx)("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 border-4 border-white/20 border-t-white rounded-full animate-spin mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-sm",children:"업로드 중..."})]})}),(0,s.jsx)("input",{ref:y,type:"file",accept:"image/jpeg,image/png,image/webp",onChange:N,className:"hidden"})]})}},7743:(e,t,a)=>{a.d(t,{A:()=>c});var s=a(5155),i=a(2115),n=a(5565),r=a(9124),o=a(6764),l=a(7358);function c(e){let{images:t,columns:a=3,gap:c=6,category:d="gallery",editable:u=!1,onImagesUpdate:p}=e,[m,h]=(0,i.useState)(t),[g,x]=(0,i.useState)(!1),[f,b]=(0,i.useState)(0),v=(e,t)=>{let a=[...m];a[e]=t,h(a),null==p||p(a)},j=e=>{let t=m.filter((t,a)=>a!==e);h(t),null==p||p(t)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"grid grid-cols-1 ".concat({2:"md:grid-cols-2",3:"md:grid-cols-2 lg:grid-cols-3",4:"md:grid-cols-2 lg:grid-cols-4"}[a]," gap-").concat(c),children:m.map((e,t)=>(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1*t},className:"relative aspect-[3/4] overflow-hidden rounded-lg bg-zinc-900 cursor-pointer group",onClick:()=>{b(t),x(!0)},children:[u?(0,s.jsx)(l.A,{src:e,alt:"Gallery image ".concat(t+1),className:"object-cover hover:scale-110 transition-transform duration-700",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",onUpdate:e=>v(t,e),onDelete:()=>j(t),category:d}):(0,s.jsx)(n.default,{src:e,alt:"Gallery image ".concat(t+1),fill:!0,className:"object-cover hover:scale-110 transition-transform duration-700",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none",children:(0,s.jsx)("div",{className:"w-12 h-12 bg-white/10 backdrop-blur-sm rounded-full flex items-center justify-center",children:(0,s.jsxs)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]},t))}),(0,s.jsx)(o.A,{images:m,currentIndex:f,isOpen:g,onClose:()=>x(!1),onNext:()=>b(e=>(e+1)%m.length),onPrevious:()=>b(e=>(e-1+m.length)%m.length)})]})}},6764:(e,t,a)=>{a.d(t,{A:()=>m});var s=a(5155),i=a(2115),n=a(5565),r=a(8619),o=a(8058),l=a(767),c=a(3518),d=a(6967),u=a(5683),p=a(9124);function m(e){let{images:t,currentIndex:a,isOpen:m,onClose:h,onNext:g,onPrevious:x}=e,[f,b]=(0,i.useState)(1),[v,j]=(0,i.useState)({x:0,y:0}),[w,y]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=e=>{if(m)switch(e.key){case"Escape":h();break;case"ArrowLeft":null==x||x();break;case"ArrowRight":null==g||g()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[m,h,g,x]);let N=()=>{b(e=>Math.min(e+.5,3))},k=()=>{b(e=>Math.max(e-.5,1)),f<=1.5&&j({x:0,y:0})},z=()=>{y(!1)},C=()=>{b(1),j({x:0,y:0})};return((0,i.useEffect)(()=>{C()},[a]),m)?(0,s.jsx)(u.N,{children:m&&(0,s.jsxs)(p.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/95 backdrop-blur-sm",onClick:h,children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 right-0 p-4 z-10 bg-gradient-to-b from-black/50 to-transparent",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),k()},className:"p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors",disabled:f<=1,children:(0,s.jsx)(r.A,{size:20})}),(0,s.jsxs)("span",{className:"text-sm",children:[Math.round(100*f),"%"]}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),N()},className:"p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors",disabled:f>=3,children:(0,s.jsx)(o.A,{size:20})})]}),(0,s.jsx)("button",{onClick:h,className:"p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors",children:(0,s.jsx)(l.A,{size:24})})]})}),(0,s.jsx)(p.P.div,{className:"absolute inset-0 flex items-center justify-center p-16",onClick:e=>e.stopPropagation(),onMouseDown:()=>{f>1&&y(!0)},onMouseMove:e=>{w&&f>1&&j(t=>({x:t.x+e.movementX,y:t.y+e.movementY}))},onMouseUp:z,onMouseLeave:z,style:{cursor:w?"grabbing":f>1?"grab":"default"},children:(0,s.jsx)(p.P.div,{animate:{scale:f,x:v.x,y:v.y},transition:{type:"spring",damping:20},className:"relative w-full h-full",children:(0,s.jsx)(n.default,{src:t[a],alt:"Image ".concat(a+1),fill:!0,className:"object-contain select-none",sizes:"100vw",priority:!0})})}),x&&a>0&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),x()},className:"absolute left-4 top-1/2 -translate-y-1/2 p-3 bg-white/10 hover:bg-white/20 rounded-full transition-colors",children:(0,s.jsx)(c.A,{size:32})}),g&&a<t.length-1&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),g()},className:"absolute right-4 top-1/2 -translate-y-1/2 p-3 bg-white/10 hover:bg-white/20 rounded-full transition-colors",children:(0,s.jsx)(d.A,{size:32})}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/50 to-transparent",children:(0,s.jsx)("div",{className:"flex items-center justify-center gap-2 overflow-x-auto py-2",children:t.map((e,t)=>(0,s.jsx)(p.P.button,{onClick:e=>{e.stopPropagation()},whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative w-16 h-16 rounded overflow-hidden transition-all ".concat(t===a?"ring-2 ring-white ring-offset-2 ring-offset-black":"opacity-50 hover:opacity-100"),children:(0,s.jsx)(n.default,{src:e,alt:"Thumbnail ".concat(t+1),fill:!0,className:"object-cover",sizes:"64px"})},t))})})]})}):null}}}]);